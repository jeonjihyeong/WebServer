{"version":3,"file":"vue-intl.mjs","names":["ref","wrapScope","scope","current","locale","fallback","defaultLocale","messages","t","id","params","formatMessage","reduce","obj","value","index","n","formatNumber","createVueIntlAdapter","createIntl","useIntl","provideIntl","rest","createRoot","getScope","createScope","props","newScope","fallbackLocale"],"sources":["../../../src/locale/adapters/vue-intl.ts"],"sourcesContent":["import { ref } from 'vue'\n\nimport type { LocaleAdapter, LocaleInstance } from '@/composables/locale'\nimport type { RtlOptions } from '@/composables/rtl'\nimport type { createIntl, IntlShape } from '@formatjs/intl'\n\ntype VueIntlAdapterOptions = {\n  createIntl: typeof createIntl\n  useIntl: any\n  provideIntl: any\n  locale: string\n  defaultLocale: string\n  messages: Record<string, Record<string, string>>\n} & RtlOptions\n\nfunction wrapScope (scope: IntlShape<string>): LocaleInstance {\n  const current = ref(scope.locale)\n  const fallback = ref(scope.defaultLocale)\n  const messages = ref(scope.messages)\n\n  return {\n    current,\n    fallback,\n    messages: messages as any,\n    t: (id, ...params) => {\n      return scope.formatMessage({ id }, params.reduce<Record<string, unknown>>((obj, value, index) => ({ ...obj, [index]: value }), {}))\n    },\n    n: value => scope.formatNumber(value),\n  }\n}\n\n/**\n * There is no reactivity in this adapter, because vue-intl package does not seem to support it\n */\nexport function createVueIntlAdapter ({\n  createIntl,\n  useIntl,\n  provideIntl,\n  locale,\n  defaultLocale,\n  messages,\n  ...rest\n}: VueIntlAdapterOptions): (LocaleAdapter & RtlOptions) {\n  return {\n    createRoot: () => {\n      return wrapScope(createIntl({\n        locale,\n        defaultLocale,\n        messages: messages[locale],\n      }))\n    },\n    getScope: () => {\n      const scope = useIntl()\n      return wrapScope(scope)\n    },\n    createScope: (props = {}) => {\n      const newScope = createIntl({\n        locale: props.locale ?? locale,\n        defaultLocale: props.fallbackLocale ?? defaultLocale,\n        messages: messages[props.locale ?? locale],\n      })\n\n      provideIntl(newScope)\n\n      return wrapScope(newScope)\n    },\n    ...rest,\n  }\n}\n"],"mappings":"AAAA,SAASA,GAAT,QAAoB,KAApB;;AAeA,SAASC,SAAT,CAAoBC,KAApB,EAA8D;EAC5D,MAAMC,OAAO,GAAGH,GAAG,CAACE,KAAK,CAACE,MAAP,CAAnB;EACA,MAAMC,QAAQ,GAAGL,GAAG,CAACE,KAAK,CAACI,aAAP,CAApB;EACA,MAAMC,QAAQ,GAAGP,GAAG,CAACE,KAAK,CAACK,QAAP,CAApB;EAEA,OAAO;IACLJ,OADK;IAELE,QAFK;IAGLE,QAAQ,EAAEA,QAHL;IAILC,CAAC,EAAE,UAACC,EAAD,EAAmB;MAAA,kCAAXC,MAAW;QAAXA,MAAW;MAAA;;MACpB,OAAOR,KAAK,CAACS,aAAN,CAAoB;QAAEF;MAAF,CAApB,EAA4BC,MAAM,CAACE,MAAP,CAAuC,CAACC,GAAD,EAAMC,KAAN,EAAaC,KAAb,MAAwB,EAAE,GAAGF,GAAL;QAAU,CAACE,KAAD,GAASD;MAAnB,CAAxB,CAAvC,EAA4F,EAA5F,CAA5B,CAAP;IACD,CANI;IAOLE,CAAC,EAAEF,KAAK,IAAIZ,KAAK,CAACe,YAAN,CAAmBH,KAAnB;EAPP,CAAP;AASD;AAED;AACA;AACA;;;AACA,OAAO,SAASI,oBAAT,OAQiD;EAAA,IARlB;IACpCC,UADoC;IAEpCC,OAFoC;IAGpCC,WAHoC;IAIpCjB,MAJoC;IAKpCE,aALoC;IAMpCC,QANoC;IAOpC,GAAGe;EAPiC,CAQkB;EACtD,OAAO;IACLC,UAAU,EAAE,MAAM;MAChB,OAAOtB,SAAS,CAACkB,UAAU,CAAC;QAC1Bf,MAD0B;QAE1BE,aAF0B;QAG1BC,QAAQ,EAAEA,QAAQ,CAACH,MAAD;MAHQ,CAAD,CAAX,CAAhB;IAKD,CAPI;IAQLoB,QAAQ,EAAE,MAAM;MACd,MAAMtB,KAAK,GAAGkB,OAAO,EAArB;MACA,OAAOnB,SAAS,CAACC,KAAD,CAAhB;IACD,CAXI;IAYLuB,WAAW,EAAE,YAAgB;MAAA;;MAAA,IAAfC,KAAe,uEAAP,EAAO;MAC3B,MAAMC,QAAQ,GAAGR,UAAU,CAAC;QAC1Bf,MAAM,mBAAEsB,KAAK,CAACtB,MAAR,4BAAkBA,MADE;QAE1BE,aAAa,2BAAEoB,KAAK,CAACE,cAAR,oCAA0BtB,aAFb;QAG1BC,QAAQ,EAAEA,QAAQ,mBAACmB,KAAK,CAACtB,MAAP,6BAAiBA,MAAjB;MAHQ,CAAD,CAA3B;MAMAiB,WAAW,CAACM,QAAD,CAAX;MAEA,OAAO1B,SAAS,CAAC0B,QAAD,CAAhB;IACD,CAtBI;IAuBL,GAAGL;EAvBE,CAAP;AAyBD"}