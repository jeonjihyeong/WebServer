{"version":3,"file":"vue-i18n.mjs","names":["computed","watch","wrapScope","scope","current","locale","fallback","fallbackLocale","value","messages","t","n","createVueI18nAdapter","i18n","useI18n","rest","createRoot","global","getScope","legacy","useScope","createScope","props","inheritLocale"],"sources":["../../../src/locale/adapters/vue-i18n.ts"],"sourcesContent":["import { computed, watch } from 'vue'\n\n// Types\nimport type { Composer, I18n, useI18n } from 'vue-i18n'\nimport type { LocaleAdapter, LocaleInstance } from '@/composables/locale'\nimport type { RtlOptions } from '@/composables/rtl'\n\ntype VueI18nAdapterParams = {\n  i18n: I18n<{}, {}, {}, string, false>\n  useI18n: typeof useI18n\n} & RtlOptions\n\nfunction wrapScope (scope: Composer): LocaleInstance {\n  return {\n    current: scope.locale,\n    fallback: computed(() => {\n      // TODO: Handle this better?\n      return typeof scope.fallbackLocale.value !== 'string' ? 'en'\n        : scope.fallbackLocale.value\n    }),\n    // TODO: Can this be fixed?\n    messages: scope.messages as any,\n    t: scope.t,\n    n: scope.n,\n  }\n}\n\nexport function createVueI18nAdapter ({ i18n, useI18n, ...rest }: VueI18nAdapterParams): (LocaleAdapter & RtlOptions) {\n  return {\n    createRoot: () => {\n      return wrapScope(i18n.global)\n    },\n    getScope: () => {\n      const scope = useI18n({ legacy: false, useScope: 'parent' }) as Composer\n\n      return wrapScope(scope)\n    },\n    createScope: (props = {}) => {\n      const scope = useI18n({\n        legacy: false,\n        useScope: 'local',\n        messages: (props.messages ?? i18n.global.messages) as any, // TODO: Fix this\n        locale: props.locale,\n        fallbackLocale: props.fallbackLocale,\n        inheritLocale: !props.locale,\n      }) as Composer\n\n      watch(() => props.locale, () => {\n        if (props.locale) {\n          scope.locale.value = props.locale\n        } else {\n          scope.inheritLocale = true\n        }\n      })\n\n      watch(() => props.fallbackLocale, () => {\n        if (props.fallbackLocale) {\n          scope.fallbackLocale.value = props.fallbackLocale\n        }\n      })\n\n      return wrapScope(scope)\n    },\n    ...rest,\n  }\n}\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,KAAnB,QAAgC,KAAhC,C,CAEA;;AAUA,SAASC,SAAT,CAAoBC,KAApB,EAAqD;EACnD,OAAO;IACLC,OAAO,EAAED,KAAK,CAACE,MADV;IAELC,QAAQ,EAAEN,QAAQ,CAAC,MAAM;MACvB;MACA,OAAO,OAAOG,KAAK,CAACI,cAAN,CAAqBC,KAA5B,KAAsC,QAAtC,GAAiD,IAAjD,GACHL,KAAK,CAACI,cAAN,CAAqBC,KADzB;IAED,CAJiB,CAFb;IAOL;IACAC,QAAQ,EAAEN,KAAK,CAACM,QARX;IASLC,CAAC,EAAEP,KAAK,CAACO,CATJ;IAULC,CAAC,EAAER,KAAK,CAACQ;EAVJ,CAAP;AAYD;;AAED,OAAO,SAASC,oBAAT,OAA+G;EAAA,IAAhF;IAAEC,IAAF;IAAQC,OAAR;IAAiB,GAAGC;EAApB,CAAgF;EACpH,OAAO;IACLC,UAAU,EAAE,MAAM;MAChB,OAAOd,SAAS,CAACW,IAAI,CAACI,MAAN,CAAhB;IACD,CAHI;IAILC,QAAQ,EAAE,MAAM;MACd,MAAMf,KAAK,GAAGW,OAAO,CAAC;QAAEK,MAAM,EAAE,KAAV;QAAiBC,QAAQ,EAAE;MAA3B,CAAD,CAArB;MAEA,OAAOlB,SAAS,CAACC,KAAD,CAAhB;IACD,CARI;IASLkB,WAAW,EAAE,YAAgB;MAAA;;MAAA,IAAfC,KAAe,uEAAP,EAAO;MAC3B,MAAMnB,KAAK,GAAGW,OAAO,CAAC;QACpBK,MAAM,EAAE,KADY;QAEpBC,QAAQ,EAAE,OAFU;QAGpBX,QAAQ,qBAAGa,KAAK,CAACb,QAAT,8BAAqBI,IAAI,CAACI,MAAL,CAAYR,QAHrB;QAGuC;QAC3DJ,MAAM,EAAEiB,KAAK,CAACjB,MAJM;QAKpBE,cAAc,EAAEe,KAAK,CAACf,cALF;QAMpBgB,aAAa,EAAE,CAACD,KAAK,CAACjB;MANF,CAAD,CAArB;MASAJ,KAAK,CAAC,MAAMqB,KAAK,CAACjB,MAAb,EAAqB,MAAM;QAC9B,IAAIiB,KAAK,CAACjB,MAAV,EAAkB;UAChBF,KAAK,CAACE,MAAN,CAAaG,KAAb,GAAqBc,KAAK,CAACjB,MAA3B;QACD,CAFD,MAEO;UACLF,KAAK,CAACoB,aAAN,GAAsB,IAAtB;QACD;MACF,CANI,CAAL;MAQAtB,KAAK,CAAC,MAAMqB,KAAK,CAACf,cAAb,EAA6B,MAAM;QACtC,IAAIe,KAAK,CAACf,cAAV,EAA0B;UACxBJ,KAAK,CAACI,cAAN,CAAqBC,KAArB,GAA6Bc,KAAK,CAACf,cAAnC;QACD;MACF,CAJI,CAAL;MAMA,OAAOL,SAAS,CAACC,KAAD,CAAhB;IACD,CAlCI;IAmCL,GAAGY;EAnCE,CAAP;AAqCD"}