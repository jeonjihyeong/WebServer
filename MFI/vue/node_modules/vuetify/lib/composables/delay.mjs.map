{"version":3,"file":"delay.mjs","names":["IN_BROWSER","propsFactory","makeDelayProps","closeDelay","Number","String","openDelay","useDelay","props","cb","delays","runDelayFactory","prop","Promise","resolve","active","window","clearTimeout","delay","parseInt","setTimeout","runCloseDelay","runOpenDelay"],"sources":["../../src/composables/delay.ts"],"sourcesContent":["// Utilities\nimport { IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nexport interface DelayProps {\n  closeDelay?: number | string\n  openDelay?: number | string\n}\n\n// Composables\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String],\n}, 'delay')\n\nexport function useDelay (props: DelayProps, cb?: (value: boolean) => void) {\n  const delays: Partial<Record<keyof DelayProps, number>> = {}\n  const runDelayFactory = (prop: keyof DelayProps) => (): Promise<boolean> => {\n    // istanbul ignore next\n    if (!IN_BROWSER) return Promise.resolve(true)\n\n    const active = prop === 'openDelay'\n\n    delays.closeDelay && window.clearTimeout(delays.closeDelay)\n    delete delays.closeDelay\n\n    delays.openDelay && window.clearTimeout(delays.openDelay)\n    delete delays.openDelay\n\n    return new Promise(resolve => {\n      const delay = parseInt(props[prop] ?? 0, 10)\n\n      delays[prop] = window.setTimeout(() => {\n        cb?.(active)\n        resolve(active)\n      }, delay)\n    })\n  }\n\n  return {\n    runCloseDelay: runDelayFactory('closeDelay'),\n    runOpenDelay: runDelayFactory('openDelay'),\n  }\n}\n"],"mappings":"AAAA;SACSA,U,EAAYC,Y,6BAErB;;AAMA;AACA,OAAO,MAAMC,cAAc,GAAGD,YAAY,CAAC;EACzCE,UAAU,EAAE,CAACC,MAAD,EAASC,MAAT,CAD6B;EAEzCC,SAAS,EAAE,CAACF,MAAD,EAASC,MAAT;AAF8B,CAAD,EAGvC,OAHuC,CAAnC;AAKP,OAAO,SAASE,QAAT,CAAmBC,KAAnB,EAAsCC,EAAtC,EAAqE;EAC1E,MAAMC,MAAiD,GAAG,EAA1D;;EACA,MAAMC,eAAe,GAAIC,IAAD,IAA4B,MAAwB;IAC1E;IACA,IAAI,CAACZ,UAAL,EAAiB,OAAOa,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;IAEjB,MAAMC,MAAM,GAAGH,IAAI,KAAK,WAAxB;IAEAF,MAAM,CAACP,UAAP,IAAqBa,MAAM,CAACC,YAAP,CAAoBP,MAAM,CAACP,UAA3B,CAArB;IACA,OAAOO,MAAM,CAACP,UAAd;IAEAO,MAAM,CAACJ,SAAP,IAAoBU,MAAM,CAACC,YAAP,CAAoBP,MAAM,CAACJ,SAA3B,CAApB;IACA,OAAOI,MAAM,CAACJ,SAAd;IAEA,OAAO,IAAIO,OAAJ,CAAYC,OAAO,IAAI;MAAA;;MAC5B,MAAMI,KAAK,GAAGC,QAAQ,gBAACX,KAAK,CAACI,IAAD,CAAN,0BAAgB,CAAhB,EAAmB,EAAnB,CAAtB;MAEAF,MAAM,CAACE,IAAD,CAAN,GAAeI,MAAM,CAACI,UAAP,CAAkB,MAAM;QACrCX,EAAE,QAAF,YAAAA,EAAE,CAAGM,MAAH,CAAF;QACAD,OAAO,CAACC,MAAD,CAAP;MACD,CAHc,EAGZG,KAHY,CAAf;IAID,CAPM,CAAP;EAQD,CApBD;;EAsBA,OAAO;IACLG,aAAa,EAAEV,eAAe,CAAC,YAAD,CADzB;IAELW,YAAY,EAAEX,eAAe,CAAC,WAAD;EAFxB,CAAP;AAID"}